{"version":3,"sources":["hooks/useWindowSize.js","Race.js","ErrorBoundary.js","Activity.js","App.js","index.js"],"names":["getSize","width","window","innerWidth","height","innerHeight","BarComponent","props","useDimensions","ref","isTextBig","x","transform","y","fill","color","textAnchor","dominantBaseline","style","fontSize","data","indexValue","value","Race","useState","windowSize","setWindowSize","useEffect","handleResize","addEventListener","removeEventListener","useWindowSize","size","setData","fetch","then","r","json","message","console","log","n","arr","state","map","repo","id","name","stargazers_count","barData","sort","a","b","reverse","slice","marginLeft","fontWeight","layout","margin","top","right","bottom","left","indexBy","keys","colors","scheme","colorBy","borderColor","from","modifiers","enableGridX","axisTop","format","axisBottom","axisLeft","padding","labelTextColor","isInteractive","barComponent","motionStiffness","motionDamping","ErrorBoundary","hasError","error","errorInfo","this","children","React","Component","eventComponents","WatchEvent","event","BaseEvent","Icon","StarIcon","PushEvent","GitMergeIcon","listStyle","payload","commits","commit","verticalAlign","author","CreateEvent","SimpleeBaseEvent","PublicEvent","Activity","Date","type","ref_type","Event","border","marginBottom","float","lineHeight","actor","login","src","avatar_url","borderRadius","paddingBottom","created_at","replace","display","gridTemplateColumns","fontFamily","render","StrictMode","App","document","getElementById"],"mappings":"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","file":"static/js/main.a4b73053.chunk.js","sourcesContent":["import { useEffect, useState } from 'react'\n\nfunction getSize() {\n  return {\n    width: window.innerWidth,\n    height: window.innerHeight,\n  }\n}\n\nexport function useWindowSize() {\n  const [windowSize, setWindowSize] = useState(getSize())\n\n  useEffect(() => {\n    function handleResize() {\n      setWindowSize(getSize())\n    }\n\n    window.addEventListener('resize', handleResize)\n    return () => window.removeEventListener('resize', handleResize)\n  }, [])\n\n  return windowSize\n}\n","import React, { useState, useEffect } from 'react'\nimport { Bar } from '@nivo/bar'\nimport useDimensions from 'react-use-dimensions'\nimport { useWindowSize } from './hooks/useWindowSize'\n\nfunction take(n, arr) {\n  return arr.slice(0, n)\n}\n\nconst BarComponent = (props) => {\n  const [ref, { width }] = useDimensions()\n\n  const isTextBig = width > props.width - 20\n  const x = isTextBig ? 10 : props.width - 16\n\n  return (\n    <g transform={`translate(${props.x},${props.y})`}>\n      <rect\n        x={-3}\n        y={7}\n        width={props.width}\n        height={props.height}\n        fill=\"rgba(0, 0, 0, .07)\"\n      />\n      <rect width={props.width} height={props.height} fill={props.color} />\n      <rect\n        x={props.width - 8}\n        width={8}\n        height={props.height}\n        fill={`rgba(0,0,0,0.2)`}\n      />\n      <text\n        x={x}\n        y={props.height / 4.5}\n        textAnchor={isTextBig ? 'start' : 'end'}\n        dominantBaseline=\"central\"\n        fill={'rgba(0,0,0,0.75)'}\n        style={{\n          fontSize: props.height / 3,\n        }}\n        ref={ref}\n      >\n        {props.data.indexValue}\n      </text>\n      <text\n        x={x}\n        y={props.height / 1.5}\n        textAnchor={isTextBig ? 'start' : 'end'}\n        dominantBaseline=\"central\"\n        fill={'black'}\n        style={{\n          fontSize: props.height / 2.1,\n        }}\n      >\n        {props.data.value}\n      </text>\n    </g>\n  )\n}\n\nconst Race = () => {\n  const { height } = useWindowSize()\n  const [ref, size] = useDimensions()\n  const [data, setData] = useState([])\n\n  useEffect(() => {\n    fetch('https://api.github.com/orgs/klarna-incubator/repos')\n      .then((r) => r.json())\n      .then((data) => {\n        setData(data)\n      })\n  }, [])\n\n  if (data.message) return data.message\n  console.log({ data })\n\n  const state = data.map((repo) => {\n    return {\n      id: repo.name,\n      value: repo.stargazers_count,\n    }\n  })\n\n  const barData = take(\n    18,\n    [...state].sort((a, b) => a.value - b.value).reverse()\n  ).reverse()\n\n  return (\n    <div ref={ref}>\n      <h1 style={{ marginLeft: 60, fontWeight: 400, color: '#334' }}>\n        Repos popularity\n      </h1>\n\n      <Bar\n        width={size.width}\n        height={height - 130}\n        layout=\"horizontal\"\n        margin={{ top: 26, right: 120, bottom: 26, left: 60 }}\n        data={barData}\n        indexBy=\"id\"\n        keys={['value']}\n        colors={{ scheme: 'spectral' }}\n        colorBy=\"indexValue\"\n        borderColor={{ from: 'color', modifiers: [['darker', 2.6]] }}\n        enableGridX\n        // enableGridY={false}\n        axisTop={{\n          format: '~s',\n        }}\n        axisBottom={{\n          format: '~s',\n        }}\n        axisLeft={null}\n        padding={0.3}\n        labelTextColor={{ from: 'color', modifiers: [['darker', 1.4]] }}\n        isInteractive={false}\n        barComponent={BarComponent}\n        motionStiffness={170}\n        motionDamping={26}\n      />\n    </div>\n  )\n}\n\nexport default Race\n","import React from 'react'\n\nexport default class ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = { hasError: false }\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true }\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // You can also log the error to an error reporting service\n    // logErrorToMyService(error, errorInfo)\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      return <h1>Something went wrong.</h1>\n    }\n\n    return this.props.children\n  }\n}\n","import React, { useState, useEffect } from 'react'\n// import useInterval from './hooks/useInterval'\n\nimport {\n  GitMergeIcon,\n  StarIcon,\n  PlusIcon,\n  RocketIcon,\n  GitCommitIcon,\n} from '@primer/octicons-react'\nimport ErrorBoundary from './ErrorBoundary'\n\nconst eventComponents = {\n  WatchEvent: WatchEvent,\n  PushEvent: PushEvent,\n  CreateEvent: CreateEvent,\n  PublicEvent: PublicEvent,\n}\n\nexport default function Activity() {\n  const [data, setData] = useState([])\n\n  useEffect(() => {\n    fetch(\n      `https://api.github.com/orgs/klarna-incubator/events?time=${new Date()}`\n    )\n      .then((r) => r.json())\n      .then((data) => {\n        setData(data)\n      })\n  }, [])\n\n  if (data.message) return data.message\n\n  return (\n    <div>\n      <h1 style={{ fontWeight: 400, color: '#334' }}>Activity</h1>\n\n      {data.map((event) => {\n        if (\n          event.type === 'CreateEvent' &&\n          event.payload.ref_type !== 'repository'\n        ) {\n          return null\n        }\n\n        const Event = eventComponents[event.type]\n        if (!Event) return null\n\n        return (\n          <div\n            style={{\n              padding: 10,\n              border: '1px solid #eeeef3',\n              marginBottom: 10,\n            }}\n          >\n            <ErrorBoundary>\n              <Event event={event} />\n            </ErrorBoundary>\n          </div>\n        )\n      })}\n    </div>\n  )\n}\n\nfunction BaseEvent({ event, children, Icon }) {\n  return (\n    <>\n      <div\n        style={{\n          fontSize: 10,\n          color: '#667',\n          float: 'right',\n          lineHeight: 1,\n        }}\n      >\n        {event.actor.login}\n\n        <img\n          src={event.actor.avatar_url}\n          style={{\n            width: 16,\n            borderRadius: 4,\n            verticalAlign: 'middle',\n            marginLeft: 5,\n          }}\n        />\n      </div>\n      <div style={{ fontSize: 10, color: '#667', paddingBottom: 5 }}>\n        {event.created_at}\n      </div>\n\n      <div>\n        <Icon /> {event.repo.name.replace('klarna-incubator/', '')}\n      </div>\n\n      {children}\n    </>\n  )\n}\n\nfunction WatchEvent({ event }) {\n  return <BaseEvent event={event} Icon={StarIcon} />\n}\n\nfunction PushEvent({ event }) {\n  return (\n    <BaseEvent event={event} Icon={GitMergeIcon}>\n      <ul style={{ listStyle: 'none', padding: 0, margin: 0 }}>\n        {event.payload.commits.map((commit) => {\n          return (\n            <li\n              style={{\n                marginLeft: 20,\n                fontSize: 10,\n                padding: 10,\n              }}\n            >\n              <GitCommitIcon style={{ verticalAlign: 'middle', width: 12 }} />\n              <b> {commit.author.name} </b>\n              <i>{commit.message}</i>\n            </li>\n          )\n        })}\n      </ul>\n    </BaseEvent>\n  )\n}\n\nfunction CreateEvent({ event }) {\n  return <SimpleeBaseEvent event={event} message={'was created!'} />\n}\n\nfunction SimpleeBaseEvent({ event, message }) {\n  return (\n    <>\n      <div style={{ fontSize: 10, color: '#667', paddingBottom: 5 }}>\n        {event.created_at}\n      </div>\n      <div>\n        <RocketIcon /> {event.repo.name.replace('klarna-incubator/', '')}{' '}\n        {message}\n      </div>\n    </>\n  )\n}\n\nfunction PublicEvent({ event }) {\n  return <SimpleeBaseEvent event={event} message={'is now public!'} />\n}\n","import React, { useState } from 'react'\nimport Race from './Race'\nimport Activity from './Activity'\n\nimport {\n  GitMergeIcon,\n  StarIcon,\n  PlusIcon,\n  RocketIcon,\n  GitCommitIcon,\n} from '@primer/octicons-react'\nimport ErrorBoundary from './ErrorBoundary'\n\nexport default () => {\n  return (\n    <div\n      style={{\n        display: 'grid',\n        gridTemplateColumns: '2fr 1fr',\n        height: '100%',\n        fontFamily: 'Menlo, Consolas, monospace',\n      }}\n    >\n      <ErrorBoundary>\n        <Race />\n      </ErrorBoundary>\n      <ErrorBoundary>\n        <Activity />\n      </ErrorBoundary>\n    </div>\n  )\n}\n","import React from 'react'\nimport { render } from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nrender(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}