{"version":3,"sources":["hooks/useInterval.js","hooks/useWindowSize.js","Race.js","App.js","index.js"],"names":["useInterval","callback","delay","savedCallback","useRef","useEffect","current","tick","id","setInterval","clearInterval","getSize","width","window","innerWidth","height","innerHeight","BarComponent","props","useDimensions","ref","isTextBig","x","transform","y","fill","color","textAnchor","dominantBaseline","style","fontSize","data","indexValue","value","Race","useState","windowSize","setWindowSize","handleResize","addEventListener","removeEventListener","useWindowSize","size","setData","fetch","then","r","json","n","arr","state","map","repo","name","stargazers_count","barData","sort","a","b","reverse","slice","marginLeft","fontWeight","layout","margin","top","right","bottom","left","indexBy","keys","colors","scheme","colorBy","borderColor","from","modifiers","enableGridX","axisTop","format","axisBottom","axisLeft","padding","labelTextColor","isInteractive","barComponent","motionStiffness","motionDamping","BaseEvent","event","children","Icon","float","lineHeight","actor","login","src","avatar_url","borderRadius","verticalAlign","paddingBottom","created_at","replace","eventComponents","WatchEvent","StarIcon","PushEvent","GitMergeIcon","listStyle","payload","commits","commit","author","message","CreateEvent","PublicEvent","Commits","type","ref_type","Event","border","marginBottom","display","gridTemplateColumns","fontFamily","render","StrictMode","App","document","getElementById"],"mappings":"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","file":"static/js/main.651e6237.chunk.js","sourcesContent":["import { useEffect, useRef } from 'react'\n\nexport default function useInterval(callback, delay) {\n  const savedCallback = useRef()\n\n  useEffect(() => {\n    savedCallback.current = callback\n  }, [callback])\n\n  useEffect(() => {\n    function tick() {\n      savedCallback.current()\n    }\n\n    if (delay !== null) {\n      let id = setInterval(tick, delay)\n      tick()\n      return () => clearInterval(id)\n    }\n  }, [delay])\n}\n","import { useEffect, useState } from 'react'\n\nfunction getSize() {\n  return {\n    width: window.innerWidth,\n    height: window.innerHeight,\n  }\n}\n\nexport function useWindowSize() {\n  const [windowSize, setWindowSize] = useState(getSize())\n\n  useEffect(() => {\n    function handleResize() {\n      setWindowSize(getSize())\n    }\n\n    window.addEventListener('resize', handleResize)\n    return () => window.removeEventListener('resize', handleResize)\n  }, [])\n\n  return windowSize\n}\n","import React, { useState } from 'react'\nimport { Bar } from '@nivo/bar'\nimport useDimensions from 'react-use-dimensions'\nimport useInterval from './hooks/useInterval'\nimport { useWindowSize } from './hooks/useWindowSize'\n\nfunction take(n, arr) {\n  return arr.slice(0, n)\n}\n\nconst BarComponent = (props) => {\n  const [ref, { width }] = useDimensions()\n\n  const isTextBig = width > props.width - 20\n  const x = isTextBig ? 10 : props.width - 16\n\n  return (\n    <g transform={`translate(${props.x},${props.y})`}>\n      <rect\n        x={-3}\n        y={7}\n        width={props.width}\n        height={props.height}\n        fill=\"rgba(0, 0, 0, .07)\"\n      />\n      <rect width={props.width} height={props.height} fill={props.color} />\n      <rect\n        x={props.width - 8}\n        width={8}\n        height={props.height}\n        fill={`rgba(0,0,0,0.2)`}\n      />\n      <text\n        x={x}\n        y={props.height / 4.5}\n        textAnchor={isTextBig ? 'start' : 'end'}\n        dominantBaseline=\"central\"\n        fill={'rgba(0,0,0,0.75)'}\n        style={{\n          fontSize: props.height / 3,\n        }}\n        ref={ref}\n      >\n        {props.data.indexValue}\n      </text>\n      <text\n        x={x}\n        y={props.height / 1.5}\n        textAnchor={isTextBig ? 'start' : 'end'}\n        dominantBaseline=\"central\"\n        fill={'black'}\n        style={{\n          fontSize: props.height / 2.1,\n        }}\n      >\n        {props.data.value}\n      </text>\n    </g>\n  )\n}\n\nconst Race = () => {\n  const { height } = useWindowSize()\n  const [ref, size] = useDimensions()\n  const [data, setData] = useState([])\n\n  useInterval(() => {\n    fetch('https://api.github.com/orgs/klarna-incubator/repos')\n      .then((r) => r.json())\n      .then((data) => {\n        setData(data)\n      })\n  }, 60000)\n\n  const state = data.map((repo) => {\n    return {\n      id: repo.name,\n      value: repo.stargazers_count,\n    }\n  })\n\n  const barData = take(\n    18,\n    [...state].sort((a, b) => a.value - b.value).reverse()\n  ).reverse()\n\n  return (\n    <div ref={ref}>\n      <h1 style={{ marginLeft: 60, fontWeight: 400, color: '#334' }}>\n        Repos popularity\n      </h1>\n\n      <Bar\n        width={size.width}\n        height={height - 130}\n        layout=\"horizontal\"\n        margin={{ top: 26, right: 120, bottom: 26, left: 60 }}\n        data={barData}\n        indexBy=\"id\"\n        keys={['value']}\n        colors={{ scheme: 'spectral' }}\n        colorBy=\"indexValue\"\n        borderColor={{ from: 'color', modifiers: [['darker', 2.6]] }}\n        enableGridX\n        // enableGridY={false}\n        axisTop={{\n          format: '~s',\n        }}\n        axisBottom={{\n          format: '~s',\n        }}\n        axisLeft={null}\n        padding={0.3}\n        labelTextColor={{ from: 'color', modifiers: [['darker', 1.4]] }}\n        isInteractive={false}\n        barComponent={BarComponent}\n        motionStiffness={170}\n        motionDamping={26}\n      />\n    </div>\n  )\n}\n\nexport default Race\n","import React, { useState } from 'react'\nimport Race from './Race'\nimport { useWindowSize } from './hooks/useWindowSize'\nimport useInterval from './hooks/useInterval'\nimport {\n  GitMergeIcon,\n  StarIcon,\n  PlusIcon,\n  RocketIcon,\n  GitCommitIcon,\n} from '@primer/octicons-react'\n\nfunction BaseEvent({ event, children, Icon }) {\n  return (\n    <>\n      <div\n        style={{\n          fontSize: 10,\n          color: '#667',\n          float: 'right',\n          lineHeight: 1,\n        }}\n      >\n        {event.actor.login}\n\n        <img\n          src={event.actor.avatar_url}\n          style={{\n            width: 16,\n            borderRadius: 4,\n            verticalAlign: 'middle',\n            marginLeft: 5,\n          }}\n        />\n      </div>\n      <div style={{ fontSize: 10, color: '#667', paddingBottom: 5 }}>\n        {event.created_at}\n      </div>\n\n      <div>\n        <Icon /> {event.repo.name.replace('klarna-incubator/', '')}\n      </div>\n\n      {children}\n    </>\n  )\n}\n\nfunction WatchEvent({ event }) {\n  return <BaseEvent event={event} Icon={StarIcon} />\n}\n\nfunction PushEvent({ event }) {\n  return (\n    <BaseEvent event={event} Icon={GitMergeIcon}>\n      <ul style={{ listStyle: 'none', padding: 0, margin: 0 }}>\n        {event.payload.commits.map((commit) => {\n          return (\n            <li\n              style={{\n                marginLeft: 20,\n                fontSize: 10,\n                padding: 10,\n              }}\n            >\n              <GitCommitIcon style={{ verticalAlign: 'middle', width: 12 }} />\n              <b> {commit.author.name} </b>\n              <i>{commit.message}</i>\n            </li>\n          )\n        })}\n      </ul>\n    </BaseEvent>\n  )\n}\n\nfunction CreateEvent({ event }) {\n  return (\n    <>\n      <div style={{ fontSize: 10, color: '#667', paddingBottom: 5 }}>\n        {event.created_at}\n      </div>\n      <div>\n        <RocketIcon /> {event.repo.name.replace('klarna-incubator/', '')} is now\n        public!\n      </div>\n    </>\n  )\n}\n\nfunction PublicEvent({ event }) {\n  return (\n    <>\n      <div style={{ fontSize: 10, color: '#667', paddingBottom: 5 }}>\n        {event.created_at}\n      </div>\n      <div>\n        <RocketIcon /> {event.repo.name.replace('klarna-incubator/', '')} is now\n        public!\n      </div>\n    </>\n  )\n}\n\nconst eventComponents = {\n  WatchEvent: WatchEvent,\n  PushEvent: PushEvent,\n  CreateEvent: CreateEvent,\n  PublicEvent: PublicEvent,\n}\n\nfunction Commits() {\n  const [data, setData] = useState([])\n\n  useInterval(() => {\n    fetch('https://api.github.com/orgs/klarna-incubator/events')\n      .then((r) => r.json())\n      .then((data) => {\n        setData(data)\n      })\n  }, 10000)\n\n  return (\n    <div>\n      <h1 style={{ fontWeight: 400, color: '#334' }}>Activity</h1>\n\n      {data.map((event) => {\n        if (\n          event.type === 'CreateEvent' &&\n          event.payload.ref_type !== 'repository'\n        ) {\n          return null\n        }\n\n        const Event = eventComponents[event.type] || BaseEvent\n\n        return (\n          <div\n            style={{\n              padding: 10,\n              border: '1px solid #eeeef3',\n              marginBottom: 10,\n            }}\n          >\n            <Event event={event} />\n          </div>\n        )\n      })}\n    </div>\n  )\n}\n\nexport default () => {\n  // const { height } = useWindowSize()\n  // return <Race />\n\n  return (\n    <div\n      style={{\n        display: 'grid',\n        gridTemplateColumns: '2fr 1fr',\n        height: '100%',\n        fontFamily: 'Menlo, Consolas, monospace',\n      }}\n    >\n      <Race />\n      <Commits />\n    </div>\n  )\n}\n","import React from 'react'\nimport { render } from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nrender(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}